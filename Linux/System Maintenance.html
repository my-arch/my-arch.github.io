<script type="text/javascript" src="/usr/share/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<html>
	<head>
		<link rel="Stylesheet" type="text/css" href="/style.css" />
		<title>System Maintenance</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	</head>
	<div class="topnav">
		<a href="https://my-arch.github.io/index.html">HOME</a>
		<a class="active" href="https://my-arch.github.io/Linux/Linux.html">LINUX</a>
		<a href="https://my-arch.github.io/Math/Mathematics.html">MATHEMATICS</a>
		<a href="https://my-arch.github.io/Teaching/Teaching.html">TEACHING MATERIALS</a>
	</div>
	<body>
		<div class="content">
		
<div id="System Maintenance"><h1 id="System Maintenance">System Maintenance</h1></div>

<div id="System Maintenance-Add Package Signature Key"><h2 id="Add Package Signature Key">Add Package Signature Key</h2></div>
<ul>
<li>
gpg --keyserver hkp://keys.gnupg.net --recv-keys <em>&lt;keyid&gt;</em>

</ul>

<div id="System Maintenance-Clean up system"><h2 id="Clean up system">Clean up system</h2></div>
<ol>
<li>
Remove all the cached packages that are not currently installed, and the unused sync database:

<ul>
<li>
sudo pacman -Sc

</ul>
<li>
To remove all cached versions of packages, except for the most recent one:

<ul>
<li>
sudo paccache -rk1

</ul>
<li>
Adding option <em>u</em> to remove all uninstall packages:

<ul>
<li>
sudo paccache -ruk0

</ul>
<li>
To remove all orphan packages:

<ul>
<li>
sudo pacman -Rns $(pacman -Qtdq)

</ul>
</ol>

<div id="System Maintenance-Build Package"><h2 id="Build Package">Build Package</h2></div>
<ol>
<li>
Install the necessary packages to compile (may be outdated)

<ul>
<li>
sudo pacman -S kernel26-headers file base-devel abs

</ul>
<li>
Download the PKGBUILD

<li>
Make the packages

<ul>
<li>
makepkg -Acs

</ul>
<li>
Install the packages

<ul>
<li>
sudo pacman -U <em>PKG</em>.pkg.tar.xz

</ul>
</ol>

<div id="System Maintenance-Hard Drive Related"><h2 id="Hard Drive Related">Hard Drive Related</h2></div>
<ol>
<li>
Find Bad Sectors

<ul>
<li>
sudo badblocks -sv -o badsectors /dev/sdb 1953481727 254528847

</ul>
<li>
Find Bad Sectors in Hard Disk

<ul>
<li>
sudo badblocks -sv -o badsectors /dev/sdb 1953481727 254528847

</ul>
<li>
Overwrite disk with zero

<ul>
<li>
sudo dd if=/dev/zero of=/dev/sd*

</ul>
<li>
File System Check - scans bad sectors and label it

<ul>
<li>
sudo fsck /dev/sd*

</ul>
</ol>

<div id="System Maintenance-Mark package as dependencies"><h2 id="Mark package as dependencies">Mark package as dependencies</h2></div>
<ol>
<li>
sudo pacman -D --asexplicit <em>PKG</em>

</ol>

<div id="System Maintenance-Scan for virus"><h2 id="Scan for virus">Scan for virus</h2></div>
<ol>
<li>
Using ClamAV

<ul>
<li>
Update Database:

<ul>
<li>
freshclam

</ul>
<li>
Scan File:

<ul>
<li>
clamscan <em>File</em>

</ul>
<li>
Scan Home:

<ul>
<li>
clamscan --recursive --infected /home # or -r -i

</ul>
<li>
Scan Whole PC:

<ul>
<li>
clamscan --recursive --infected --exclude-dir='<sup><small>/sys|</small></sup>/dev' /

</ul>
</ul>
</ol>

		</div>
	</body>
</html>
